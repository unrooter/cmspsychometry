<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class=""> <!--<![endif]-->
<head>
 
    {include file="layout/auth_meta" /}
    {include file="layout/auth_head" /}
    <link rel="stylesheet" media="screen" href="__CDN__/assets/css/bootstrap.css?v={$site.version}"/>
    <link rel="stylesheet" media="screen" href="__CDN__/assets/libs/fastadmin-layer/dist/theme/default/layer.css?v={$site.version}"/>
    <link rel="stylesheet" media="screen" href="__ADDONCMS__/css/common.css?v={$site.version}"/>
    {php}$__usercssver = @filemtime(ROOT_PATH . 'public/assets/css/user.css');{/php}
    <link href="__CDN__/assets/css/user.css?v={$__usercssver ?: $Think.config.site.version|htmlentities}" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="__CDN__/libs/html5shiv.js"></script>
    <script src="__CDN__/libs/respond.min.js"></script>
    <![endif]-->
</head> 
 <body class="min-h-screen group-page skin-white">
 <style>
    /* header {
        position: relative;
    }
     .navbar{
         background-color: #0E2D31;
     }
    a {
        color: #0E2D31;
    }
    a:hover, a:focus{
        color: #000;
    }
    .u-flex-between {
        justify-content: space-between
    }
    .navbar-nav > li > a{
        color: #fff;
    }
    .navbar-toggle .icon-bar{
        background-color: #fff;
    }
    .dropdown-menu > li > a{
        color: #f8f8f8;
    }
    .nav .open > a, .nav .open > a:hover, .nav .open > a:focus{
        background-color: #2D8489;
        color: #fff;
    }
    .vipBtn{
            background: linear-gradient(to right, #ff9966, #ff5e62); 
            color: #fff!important;
            font-weight: 700;
            text-align: center;
        } */
        /* @media (max-width: 991px) {
        .sidebar-toggle{
            position: fixed;
            right: 0;
            top: 0;
            border-radius: 50%;
            background: #FB6B00;
            color: #fff;
            font-size: 22px;
            padding: 10px;
            line-height: 30px;
            height: 50px;
            width: 50px;
            text-align: center;
            z-index: 999999;
        }
    } */
    
    /* 语言切换样式 */
    .lang-switch {
        position: relative;
        padding: 8px 15px;
        display: block;
        color: #333;
        text-decoration: none;
        transition: all 0.3s ease;
    }
    
    .lang-switch:hover {
        background-color: #f5f5f5;
        color: #5DBE9E;
        text-decoration: none;
    }
    
    .lang-switch.active {
        background-color: #5DBE9E;
        color: white !important;
        font-weight: bold;
    }
    
    .lang-switch.active:hover {
        background-color: #4a9d7e;
        color: white !important;
    }
    
    .lang-switch i {
        margin-right: 8px;
        width: 16px;
        text-align: center;
    }
    
    .lang-switch.active i {
        color: white !important;
    }
    
    /* 移动端优化 */
    @media (max-width: 768px) {
        .lang-switch {
            padding: 10px 15px;
            font-size: 14px;
        }
    }

    body.group-page.skin-white {
        background: #f7f7f7;
        color: #111;
        font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
        font-size: 16px;
        line-height: 1.5;
        padding-top: 0 !important;
    }

    .auth-page, .auth-page * {
        box-sizing: border-box;
    }

    .auth-page .input-group {
        display: flex !important;
        align-items: stretch !important;
        width: 100% !important;
    }

    .auth-page .input-group .form-control {
        flex: 1 1 auto !important;
        min-width: 0 !important;
    }

    .auth-page .input-group-btn {
        flex: 0 0 auto !important;
        display: flex !important;
    }

    .auth-page .input-group-btn .btn {
        white-space: nowrap;
    }

    .navbar.navbar-default.navbar-white.navbar-fixed-top {
        background: #fff !important;
        border: 0 !important;
        border-bottom: 1px solid rgba(0,0,0,0.06) !important;
        box-shadow: none !important;
    }

    .navbar.navbar-default.navbar-white.navbar-fixed-top .container {
        width: 100% !important;
        max-width: 1280px;
        padding-left: 16px;
        padding-right: 16px;
    }

    .navbar-default .navbar-brand {
        height: 60px;
        padding: 10px 15px;
    }

    .navbar-default .navbar-nav > li > a {
        font-size: 12px;
        font-weight: 600;
        letter-spacing: 0.14em;
    }

    .navbar-default .navbar-brand,
    .navbar-default .navbar-nav > li > a {
        color: #111 !important;
    }

    .navbar-default .navbar-nav > li > a:hover,
    .navbar-default .navbar-nav > li > a:focus {
        color: #000 !important;
        background: transparent !important;
    }

    .navbar-default .dropdown-menu {
        border-radius: 0;
        border: 1px solid rgba(0,0,0,0.08);
        box-shadow: none;
        background: #fff;
    }

    .navbar-default .dropdown-menu > li > a {
        color: #111;
    }

    .navbar-default .dropdown-menu > li > a:hover,
    .navbar-default .dropdown-menu > li > a:focus {
        background: rgba(0,0,0,0.04);
        color: #000;
    }

    #footer {
        background: #fff;
        border-top: 1px solid rgba(0,0,0,0.06);
    }

    #footer .container {
        width: 100% !important;
        max-width: 1280px;
        padding-left: 16px;
        padding-right: 16px;
    }

    #footer, #footer a {
        color: rgba(0,0,0,0.65);
    }

    #footer a:hover {
        color: #000;
    }

    .auth-page .form-control {
        height: 44px;
        padding: 10px 12px;
        border-radius: 0;
        border-color: rgba(0,0,0,0.12);
        box-shadow: none;
    }

    .auth-page label,
    .auth-page .control-label {
        font-weight: 600;
    }

    .auth-page .form-control:focus {
        border-color: #000;
        box-shadow: none;
    }

    .auth-page .btn,
    .auth-page .btn-lg {
        border-radius: 0;
        box-shadow: none;
    }

    .auth-page .btn-primary,
    .auth-page .btn-info {
        background: #000;
        border-color: #000;
        color: #fff;
    }

    .auth-page .btn-primary:hover,
    .auth-page .btn-info:hover,
    .auth-page .btn-primary:focus,
    .auth-page .btn-info:focus {
        background: rgba(0,0,0,0.9);
        border-color: rgba(0,0,0,0.9);
        color: #fff;
    }

    .auth-page .btn-default {
        background: transparent;
        border: 1px solid rgba(0,0,0,0.12);
        color: #111;
    }

    .auth-page .btn-default:hover,
    .auth-page .btn-default:focus {
        background: rgba(0,0,0,0.04);
        border-color: rgba(0,0,0,0.16);
        color: #000;
    }
 </style>
 
 {include file="layout/auth_header" /}
 
 <main class="main-content">
     {__CONTENT__}
 </main>
 
 {include file="layout/auth_footer" /}
 
 <div id="floatbtn">
     <a id="back-to-top" class="hover" href="javascript:;">
         <i class="iconfont icon-backtotop"></i>
         <em>返回<br>顶部</em>
     </a>
     <!-- E 浮动按钮 -->
 </div>
 {if !$isMobile}
 <script type="text/javascript" src="__CDN__/assets/libs/jquery/dist/jquery.min.js?v={$site.version}"></script>
 <script type="text/javascript" src="__CDN__/assets/libs/bootstrap/dist/js/bootstrap.min.js?v={$site.version}"></script>
 <script type="text/javascript" src="__CDN__/assets/libs/fastadmin-layer/dist/layer.js?v={$site.version}"></script>
 <script type="text/javascript" src="__ADDONCMS__/js/jquery.autocomplete.js?v={$site.version}"></script>
 <script type="text/javascript" src="__ADDONCMS__/js/libs.js?v={$site.version}"></script>
 <script type="text/javascript" src="__ADDONCMS__/js/common.js?v={$site.version}"></script>
 {/if}
 
 <script>
 (function () {
     function closest(el, selector) {
         while (el && el.nodeType === 1) {
             if (el.matches(selector)) return el;
             el = el.parentElement;
         }
         return null;
     }
 
     var lastTouchTime = 0;
 
     function getCollapse() {
         return document.getElementById('navbar-collapse');
     }
 
     function removeBackdrop() {
         var bg = document.querySelector('.navbar-collapse-bg');
         if (bg && bg.parentNode) bg.parentNode.removeChild(bg);
     }
 
     function openMenu() {
         var collapse = getCollapse();
         if (!collapse) return;
         document.body.classList.add('is-open');
         collapse.classList.add('active');
         removeBackdrop();
         var bg = document.createElement('div');
         bg.className = 'navbar-collapse-bg';
         bg.addEventListener('click', function () {
             closeMenu();
         });
         collapse.insertAdjacentElement('afterend', bg);
     }
 
     function closeMenu() {
         var collapse = getCollapse();
         document.body.classList.remove('is-open');
         if (collapse) collapse.classList.remove('active');
         removeBackdrop();
     }
 
     function handleToggleEvent(e) {
         if (e.type === 'touchend') {
             lastTouchTime = Date.now();
         }
         if (e.type === 'click' && lastTouchTime && Date.now() - lastTouchTime < 600) {
             return;
         }
         var btn = closest(e.target, '.sidebar-toggle');
         if (!btn) return;
         e.preventDefault();
         e.stopImmediatePropagation();
         var collapse = getCollapse();
         if (!collapse) return;
         if (collapse.classList.contains('active')) {
             closeMenu();
         } else {
             openMenu();
         }
     }
 
     document.addEventListener('click', handleToggleEvent, true);
     document.addEventListener('touchend', handleToggleEvent, true);
 
     document.addEventListener('click', function (e) {
         var a = closest(e.target, '#navbar-collapse a');
         if (!a) return;
         if (window.innerWidth < 768) closeMenu();
     }, true);
 
     document.addEventListener('keydown', function (e) {
         if (e.key === 'Escape' || e.keyCode === 27) {
             var collapse = getCollapse();
             if (collapse && collapse.classList.contains('active')) {
                 closeMenu();
             }
         }
     }, true);
 })();
 </script>
 
 <script>
 (function () {
     function closest(el, selector) {
         while (el && el.nodeType === 1) {
             if (el.matches(selector)) return el;
             el = el.parentElement;
         }
         return null;
     }
 
     document.addEventListener('click', function (e) {
         var btn = closest(e.target, '.oh-mnav-toggle');
         if (!btn) return;
         e.preventDefault();
         e.stopPropagation();
         var li = closest(btn, '.oh-mnav-item');
         if (!li) return;
         var submenu = li.querySelector('[data-mnav-submenu]');
         if (!submenu) return;
         var isHidden = submenu.classList.contains('hidden');
         if (isHidden) {
             submenu.classList.remove('hidden');
             li.classList.add('is-open');
         } else {
             submenu.classList.add('hidden');
             li.classList.remove('is-open');
         }
     }, true);
 })();
 </script>

  <!-- 多语言切换功能 -->
  <script type="text/javascript">
 // 语言切换功能
 function switchLanguage(lang) {
     // 设置cookie
     document.cookie = 'frontend_language=' + lang + '; path=/; max-age=31536000';
     
     // 构建新的URL
     const currentUrl = new URL(window.location.href);
     
     // 移除现有的语言参数
     currentUrl.searchParams.delete('lg');
     
     // 添加新的语言参数
     currentUrl.searchParams.set('lg', lang);
     
     // 如果是测试页面，同时更新API调用的语言参数
     if (window.location.pathname.includes('/MBTI/') || 
         window.location.pathname.includes('/xinling/') || 
         window.location.pathname.includes('/qinggan/') || 
         window.location.pathname.includes('/renge/') || 
         window.location.pathname.includes('/zhiye/')) {
         
         // 延迟跳转，让用户看到语言切换效果
         setTimeout(() => {
             window.location.href = currentUrl.toString();
         }, 300);
     } else {
         // 立即跳转
         window.location.href = currentUrl.toString();
     }
 }
 
 // 页面加载时初始化语言状态
 document.addEventListener('DOMContentLoaded', function() {
     const currentLang = getCookie('frontend_language') || 'zh-cn';
     
     // 更新语言切换按钮的激活状态
     document.querySelectorAll('.lang-switch').forEach(link => {
         link.classList.remove('active');
         if (link.onclick.toString().includes(currentLang)) {
             link.classList.add('active');
         }
     });
 });
 
 // 获取Cookie的辅助函数
 function getCookie(name) {
     const value = "; " + document.cookie;
     const parts = value.split("; " + name + "=");
     if (parts.length === 2) return parts.pop().split(";").shift();
 }
  </script>
 
 {include file="common/script" /}
 </body>
 </html>
