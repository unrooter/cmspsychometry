{layout name="common/layout" /}
 <div class="mx-auto max-w-7xl px-4 py-10 sm:px-6 lg:px-8" id="content-container">

     <nav aria-label="breadcrumb" class="mb-6">
         <ol class="flex flex-wrap items-center gap-x-1.5 gap-y-1 text-xs text-gray-500" itemscope itemtype="https://schema.org/BreadcrumbList">
             {php}$breadPos = 0;{/php}
             {cms:breadcrumb id="item"}
             {php}$breadPos++;{/php}
             <li class="inline-flex items-center" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                 {if $breadPos>1}<span class="mx-1 text-gray-300">›</span>{/if}
                 <a class="no-underline hover:text-black" href="{$item.url}" itemprop="item"><span itemprop="name">{:__($item.name)}</span></a>
                 <meta itemprop="position" content="{$breadPos}" />
             </li>
             {/cms:breadcrumb}
             {php}$breadPos++;{/php}
             <li class="inline-flex items-center font-semibold text-gray-900" aria-current="page" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                 <span class="mx-1 text-gray-300">›</span>
                 <span itemprop="name">{:__('详情')}</span>
                 <meta itemprop="position" content="{$breadPos}" />
             </li>
         </ol>
     </nav>

     <main class="mt-4">
         <section aria-label="{:__('详情')}">
             <div class="ui-card">
                 <div class="ui-card-header">
                     <h1 class="text-base font-semibold text-gray-900">{:__('详情')}</h1>
                 </div>

                 <div class="ui-card-body space-y-4">
                     <div class="space-y-4">
                         <!--@formatter:off-->
                         {foreach name="fieldsList" id="item"}
                             {php}if(in_array($item['name'], ['id', 'user_id', 'createtime', 'updatetime', 'memo', 'status']) || !isset($__DIYDATA__[$item['name']])) continue;{/php}
                             <div class="space-y-2">
                                 <div class="text-sm font-semibold text-gray-900">{$item.title|htmlentities}：</div>
                                 <div class="rounded-md bg-gray-50 p-3 text-sm leading-7 text-gray-700">
                                     {if in_array($item['type'],['file', 'files', 'image', 'images'])}
                                         {php}$files = array_filter(explode(',', $__DIYDATA__[$item['name']]));{/php}

                                         {if in_array($item['type'],['image', 'images'])}
                                             <div class="grid grid-cols-2 gap-2 sm:grid-cols-4 md:grid-cols-6">
                                                 {foreach name="files" id="file"}
                                                     <a href="{$file|cdnurl}" target="_blank" class="group block aspect-[4/3] overflow-hidden rounded-md bg-gray-100">
                                                         <img src="{$file|cdnurl}" alt="" loading="lazy" class="h-full w-full object-cover transition duration-300 group-hover:scale-105">
                                                     </a>
                                                 {/foreach}
                                             </div>
                                         {else/}
                                             <div class="flex flex-wrap gap-2">
                                                 {foreach name="files" id="file"}
                                                 <a href="{:htmlentities(cdnurl($file))}" class="inline-flex items-center rounded-md bg-black px-3 py-1.5 text-xs font-semibold text-white hover:bg-black/90 no-underline" target="_blank"><i class="fa fa-download mr-2" aria-hidden="true"></i>{:__('点击下载')}</a>
                                                 {/foreach}
                                             </div>
                                         {/if}
                                     {elseif in_array($item['type'],['selectpage', 'selectpages'])}
                                         {:htmlentities($__DIYDATA__[$item['name'].'_value']??'')}
                                     {elseif in_array($item['type'],['radio', 'checkbox', 'select', 'selects'])}
                                         {:htmlentities($__DIYDATA__[$item['name'].'_text']??'')}
                                     {else/}
                                         {:htmlentities($__DIYDATA__[$item['name']])}
                                     {/if}
                                 </div>
                             </div>
                         {/foreach}
                         <!--@formatter:on-->
                     </div>

                     <div class="grid gap-4 md:grid-cols-2">
                         <div class="space-y-2">
                             <div class="text-sm font-semibold text-gray-900">{:__('添加时间')}：</div>
                             <div class="rounded-md bg-gray-50 p-3 text-sm text-gray-700">{$__DIYDATA__.createtime|datetime}</div>
                         </div>

                         <div class="space-y-2">
                             <div class="text-sm font-semibold text-gray-900">{:__('状态')}：</div>
                             <div class="rounded-md bg-gray-50 p-3 text-sm text-gray-700">{$__DIYDATA__.status_text}</div>
                         </div>
                     </div>

                     {if $user && $user.id==$__DIYDATA__.user_id && $__DIYDATA__.status=='rejected'}
                     <div class="space-y-2">
                         <div class="text-sm font-semibold text-gray-900">{:__('拒绝原因')}：</div>
                         <div class="rounded-md bg-red-50 p-3 text-sm text-red-700">{$__DIYDATA__.memo}</div>
                     </div>
                     {/if}

                     <div class="pt-2">
                         <div class="flex flex-wrap gap-3">
                             {if $user && $user.id==$__DIYDATA__.user_id && $__DIYFORM__.isedit}
                             <a href="{$__DIYFORM__.posturl}?id={$__DIYDATA__.id}" class="inline-flex items-center rounded-md bg-black px-4 py-2 text-sm font-semibold text-white hover:bg-black/90 no-underline"><i class="fa fa-pencil mr-2" aria-hidden="true"></i>{:__('修改')}</a>
                             {/if}
                             <a href="{$__DIYFORM__.url}" class="inline-flex items-center rounded-md border border-gray-200 bg-white px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50"><i class="fa fa-reply mr-2" aria-hidden="true"></i>{:__('返回')}</a>
                         </div>
                     </div>
                 </div>
             </div>
         </section>
     </main>
 </div>
