{layout name="common/layout" /}
<div class="mx-auto max-w-6xl px-4 py-6" id="content-container">
    <!-- 页面主标题 H1 用于SEO -->
    <header class="mb-5">
        <h1 class="sr-only">{:__('专业心理测试在线平台 - 趣味性格测评与自我认知')}</h1>
    </header>
    
    <!-- 首页的面包屑结构化数据（仅用于SEO，不显示） -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "{:__('首页')}",
        "item": "{cms:config name='cms.indexurl'/}"
      }]
    }
    </script>
    <div class="grid gap-6 md:grid-cols-2">
        <div class="space-y-4">
            <form action="{:addon_url('cms/search/index')}" method="get">
                <div class="relative">
                    <input class="h-12 w-full rounded-full border border-gray-200 bg-white pl-12 pr-4 text-sm text-gray-900 placeholder:text-gray-400 focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-100" name="q"
                           data-suggestion-url="{:addon_url('cms/search/suggestion')}" type="search"
                           id="searchinput" value="{$Think.request.q|default=''|htmlentities}" placeholder="{:__('搜索')}">
                    <span class="pointer-events-none absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"><i class="fa fa-search" aria-hidden="true"></i></span>
                </div>
                {:token('__searchtoken__')}
            </form>
            {include file="common/item_tag" /}
        </div>
        <div>
            <div class="overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm">
                <div id="index-focus" class="relative" aria-label="{:__('焦点图')}">
                    <ol class="absolute bottom-3 left-1/2 z-10 flex -translate-x-1/2 items-center gap-2" aria-label="{:__('轮播指示器')}">
                        {cms:blocklist id="block" name="indexfocus" row="5"}
                        <li>
                            <button type="button" data-carousel-indicator data-slide-to="{:$i-1}" class="h-2.5 w-2.5 rounded-full bg-white/50 ring-1 ring-white/60 transition hover:bg-white/80 {if $i==1}bg-white{/if}" aria-label="{:__('切换轮播')}" aria-current="{if $i==1}true{else}false{/if}"></button>
                        </li>
                        {/cms:blocklist}
                    </ol>
                    <div class="relative overflow-hidden" role="region">
                        {cms:blocklist id="block" name="indexfocus" row="5"}
                        <div class="{if $i==1}block{else}hidden{/if}" data-carousel-slide>
                            <a href="{$block.url}" class="block">
                                <img src="{$block.image}"
                                     class="block h-[250px] w-full object-cover md:h-[400px]"
                                     alt="{$block.title|htmlentities} - {:__('心理测试')}"
                                     {if $i>1}loading="lazy"{/if}
                                     width="800"
                                     height="400">
                                <div class="absolute bottom-0 left-0 right-0 hidden bg-gradient-to-t from-black/60 to-transparent p-4 text-white md:block">
                                    <div class="text-base font-semibold">{$block.title|htmlentities}</div>
                                </div>
                            </a>
                        </div>
                        {/cms:blocklist}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 网站简介区块 -->
    <section class="mt-8 rounded-xl border border-gray-200 bg-white p-6 shadow-sm">
        <div class="grid gap-6 md:grid-cols-12 md:items-center">
            <div class="md:col-span-8">
                <h2 class="text-xl font-semibold text-gray-900">{:__('专业心理测试在线平台')}</h2>
                <p class="mt-3 text-sm leading-7 text-gray-600">{:__('自我孵化心理测试平台是一个集合各种专业的心理估量表以及趣味测试的平台，致力于为用户提供高质量、专业且有趣的在线心理测试服务。通过这些测试，希望你能够在不同的角度更加了解自我。')}</p>
                <div class="mt-5 grid grid-cols-3 gap-4">
                    <div class="rounded-lg bg-gray-50 p-3 text-center">
                        <div class="text-lg font-semibold text-gray-900">120+</div>
                        <div class="mt-1 text-xs text-gray-600">{:__('测试项目')}</div>
                    </div>
                    <div class="rounded-lg bg-gray-50 p-3 text-center">
                        <div class="text-lg font-semibold text-gray-900">1M+</div>
                        <div class="mt-1 text-xs text-gray-600">{:__('累计测试')}</div>
                    </div>
                    <div class="rounded-lg bg-gray-50 p-3 text-center">
                        <div class="text-lg font-semibold text-gray-900">50K+</div>
                        <div class="mt-1 text-xs text-gray-600">{:__('注册用户')}</div>
                    </div>
                </div>
            </div>
            <div class="hidden md:flex md:col-span-4 md:justify-center">
                <div class="text-center">
                    <i class="fa fa-heart text-[80px] opacity-25"></i>
                    <p class="mt-3 text-sm text-gray-700">{:__('了解自我 成就更好')}</p>
                </div>
            </div>
        </div>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const root = document.getElementById('index-focus');
            if (!root) return;

            const slides = Array.from(root.querySelectorAll('[data-carousel-slide]'));
            const indicators = Array.from(root.querySelectorAll('[data-carousel-indicator]'));
            if (!slides.length || slides.length !== indicators.length) return;

            let activeIndex = slides.findIndex(s => !s.classList.contains('hidden'));
            if (activeIndex < 0) activeIndex = 0;

            const setActive = (nextIndex) => {
                if (nextIndex < 0 || nextIndex >= slides.length) return;
                slides.forEach((slide, i) => {
                    if (i === nextIndex) {
                        slide.classList.remove('hidden');
                        slide.classList.add('block');
                    } else {
                        slide.classList.add('hidden');
                        slide.classList.remove('block');
                    }
                });
                indicators.forEach((btn, i) => {
                    if (i === nextIndex) {
                        btn.classList.add('bg-white');
                        btn.classList.remove('bg-white/50');
                        btn.setAttribute('aria-current', 'true');
                    } else {
                        btn.classList.remove('bg-white');
                        btn.classList.add('bg-white/50');
                        btn.setAttribute('aria-current', 'false');
                    }
                });
                activeIndex = nextIndex;
            };

            let timer = null;
            const start = () => {
                if (timer) clearInterval(timer);
                timer = setInterval(() => {
                    setActive((activeIndex + 1) % slides.length);
                }, 5000);
            };

            indicators.forEach((btn, i) => {
                btn.addEventListener('click', function () {
                    setActive(i);
                    start();
                });
            });

            start();
        });
    </script>

    <div class="mt-8 grid gap-6 lg:grid-cols-12">
        <main class="space-y-6 lg:col-span-8">
            <!-- 热门测试区块 -->
            <section class="rounded-lg border border-gray-200 bg-white shadow-sm" aria-labelledby="hot-tests-section">
                <header class="border-b border-gray-100 px-4 py-3">
                    <h2 class="text-base font-semibold text-gray-900" id="hot-tests-section">
                        <i class="fa fa-fire mr-2 text-emerald-600"></i>{:__('热门测试')}
                    </h2>
                </header>
                <div class="p-4">
                    <div class="grid grid-cols-2 gap-4 sm:grid-cols-3">
                        {cms:arclist id="item" channel="26,32" orderby="views" orderway="DESC" limit="6"}
                        <div>
                            {include file="common/item_mbti" /}
                        </div>
                        {/cms:arclist}
                    </div>
                </div>
            </section>

            <section class="rounded-lg border border-gray-200 bg-white shadow-sm" aria-labelledby="personality-section">
                <header class="flex items-center justify-between border-b border-gray-100 px-4 py-3">
                    <h2 class="text-base font-semibold text-gray-900" id="personality-section">{:__('趣味人格测试')}</h2>
                    <a class="text-sm text-emerald-600 hover:text-emerald-700" href="{:addon_url('cms/channel/index', [':id'=>26, ':diyname'=>'quweirenge'])}">{:__('查看更多')}</a>
                </header>
                <div class="p-4">
                    <div class="grid grid-cols-2 gap-4 sm:grid-cols-3">
                        {cms:arclist id="item" channel="26" length="8" limit="8"}
                        <div>
                            {include file="common/item_mbti" /}
                        </div>
                        {/cms:arclist}
                    </div>
                </div>
            </section>

            <section class="rounded-lg border border-gray-200 bg-white shadow-sm" aria-labelledby="fun-test-section">
                <header class="flex items-center justify-between border-b border-gray-100 px-4 py-3">
                    <h2 class="text-base font-semibold text-gray-900" id="fun-test-section">{:__('趣味心理测试')}</h2>
                    <a class="text-sm text-emerald-600 hover:text-emerald-700" href="{:addon_url('cms/channel/index', [':id'=>25, ':diyname'=>'quweiceshi'])}">{:__('查看更多')}</a>
                </header>
                <div class="p-4">
                    <div class="grid grid-cols-2 gap-4 sm:grid-cols-3 lg:grid-cols-4">
                        {cms:arclist type="son" id="item" channel="25" length="8" limit="12"}
                        <div>
                            {include file="common/item_funtest"}
                        </div>
                        {/cms:arclist}
                    </div>
                </div>
            </section>

            <section class="rounded-lg border border-gray-200 bg-white shadow-sm" aria-labelledby="faq-section" itemscope itemtype="https://schema.org/FAQPage">
                <header class="border-b border-gray-100 px-4 py-3">
                    <h2 class="text-base font-semibold text-gray-900" id="faq-section">
                        <i class="fa fa-question-circle mr-2 text-emerald-600"></i>{:__('常见问题')}
                    </h2>
                </header>
                <div class="p-4">
                    <div class="space-y-4">
                        <div class="rounded-lg bg-gray-50 p-4" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                            <h3 class="text-sm font-semibold text-gray-900" itemprop="name">
                                <i class="fa fa-check-circle mr-2 text-emerald-600"></i>{:__('心理测试准确吗？')}
                            </h3>
                            <div class="mt-2" itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                                <p class="text-sm leading-7 text-gray-600" itemprop="text">{:__('我们的测试基于专业心理学量表和理论编制，经过大量用户验证。测试结果仅供参考，帮助您更好地了解自己，不能作为临床诊断依据。')}</p>
                            </div>
                        </div>
                        <div class="rounded-lg bg-gray-50 p-4" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                            <h3 class="text-sm font-semibold text-gray-900" itemprop="name">
                                <i class="fa fa-check-circle mr-2 text-emerald-600"></i>{:__('测试需要多长时间？')}
                            </h3>
                            <div class="mt-2" itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                                <p class="text-sm leading-7 text-gray-600" itemprop="text">{:__('大多数测试在5-15分钟内可以完成。我们建议在安静的环境中，按照第一直觉作答，这样结果会更准确。')}</p>
                            </div>
                        </div>
                        <div class="rounded-lg bg-gray-50 p-4" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                            <h3 class="text-sm font-semibold text-gray-900" itemprop="name">
                                <i class="fa fa-check-circle mr-2 text-emerald-600"></i>{:__('测试结果会保密吗？')}
                            </h3>
                            <div class="mt-2" itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
                                <p class="text-sm leading-7 text-gray-600" itemprop="text">{:__('我们严格保护用户隐私，所有测试数据都经过加密处理。您的测试结果仅自己可见，我们不会向第三方透露您的个人信息。')}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <aside class="space-y-6 lg:col-span-4">
            <!-- 测试分类导航 -->
            <section class="rounded-lg border border-gray-200 bg-white shadow-sm" aria-labelledby="test-categories-section">
                <header class="border-b border-gray-100 px-4 py-3">
                    <h2 class="text-base font-semibold text-gray-900" id="test-categories-section">
                        <i class="fa fa-th-large mr-2 text-emerald-600"></i>{:__('测试分类')}
                    </h2>
                </header>
                <div class="p-2">
                    <ul class="divide-y divide-gray-100">
                        {cms:channellist id="cat" type="son" typeid="25,26" condition="1=isnav"}
                        <li>
                            <a href="{$cat.url}" class="flex items-center justify-between rounded-md px-3 py-3 text-sm text-gray-700 hover:bg-gray-50 hover:text-emerald-600">
                                <span class="flex items-center gap-2">
                                    <i class="fa fa-folder-o text-gray-400"></i>
                                    {:__($cat.name)}
                                </span>
                                <i class="fa fa-angle-right text-gray-400"></i>
                            </a>
                        </li>
                        {/cms:channellist}
                    </ul>
                </div>
            </section>

            <section class="rounded-lg border border-gray-200 bg-white shadow-sm" aria-labelledby="latest-articles-section">
                <header class="border-b border-gray-100 px-4 py-3">
                    <h2 class="text-base font-semibold text-gray-900" id="latest-articles-section">{:__('最新文章')}</h2>
                </header>
                <div class="p-4">
                    <div class="space-y-3">
                        {cms:arclist id="item" model="1" limit="10"}
                        <a class="block rounded-md px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-emerald-600" href="{$item.url}">
                            {$item.title|htmlentities}
                        </a>
                        {/cms:arclist}
                    </div>
                </div>
            </section>

            <section class="rounded-lg border border-gray-200 bg-white shadow-sm" aria-labelledby="self-assessment-section">
                <header class="border-b border-gray-100 px-4 py-3">
                    <h2 class="text-base font-semibold text-gray-900" id="self-assessment-section">{:__('专业自我测评')}</h2>
                </header>
                <div class="p-4">
                    <div class="space-y-4">
                        {cms:arclist id="item" channel="9" length="8" row="3"}
                        <div>
                            {include file="common/item_protest"}
                        </div>
                        {/cms:arclist}
                    </div>
                </div>
            </section>

            {include file="common/sidebar" /}

        </aside>
    </div>
</div>