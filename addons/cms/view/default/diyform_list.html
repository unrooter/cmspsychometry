{layout name="common/layout" /}
 <div class="mx-auto max-w-7xl px-4 py-10 sm:px-6 lg:px-8" id="content-container">

     <header class="ui-card">
         <div class="ui-card-body">
         <div class="flex flex-wrap items-center justify-between gap-3">
             <h1 class="text-xl font-bold text-gray-900">{$__DIYFORM__.name|htmlentities}</h1>
             <a href="{$__DIYFORM__.posturl}" class="inline-flex items-center rounded-md bg-black px-4 py-2 text-sm font-semibold text-white hover:bg-black/90 no-underline">
                 <i class="fa fa-pencil mr-2" aria-hidden="true"></i>{$__DIYFORM__.posttitle|htmlentities}
             </a>
         </div>
         </div>
     </header>

     {if $__FILTERLIST__}
     <section class="mt-4" aria-label="{:__('筛选条件')}">
         <div class="ui-card">
             <div class="ui-card-body">
             <div class="flex flex-wrap items-center justify-between gap-3">
                 <h2 class="inline-flex items-center gap-2 text-xs font-semibold tracking-[0.18em] text-gray-900"><i class="fa fa-filter text-black/60" aria-hidden="true"></i>{:__('筛选')}</h2>
                 <form action="" id="multipleform" class="flex items-center gap-2">
                     <input type="checkbox" name="multiple" id="multiple"
                            class="h-4 w-4 rounded border-gray-300 text-gray-900 focus:ring-black/10"
                            onclick="document.getElementById('multipleform').submit();"
                            value="{:$Think.get.multiple?0:1}"
                            {:$Think.get.multiple?'checked':''}>
                     <label for="multiple" class="text-sm text-gray-700">{:__('多选模式')}</label>
                 </form>
             </div>

             <div class="mt-4 space-y-4">
                 {cms:pagefilter id="filter" exclude=""}
                 <div class="flex flex-wrap items-start gap-3">
                     <div class="mt-1 w-20 shrink-0 text-sm font-medium text-gray-700">{$filter.title|htmlentities}:</div>
                     <div class="flex flex-wrap gap-2">
                         {volist name="$filter.content" id="item"}
                         <a href="{$item.url}" class="rounded-full border border-gray-200 bg-white px-3 py-1 text-sm text-gray-700 hover:bg-gray-50 hover:text-black no-underline {$item.active?'bg-gray-50 text-black border-gray-200':''}">{$item.title|htmlentities}</a>
                         {/volist}
                     </div>
                 </div>
                 {/cms:pagefilter}
             </div>
             </div>
         </div>
     </section>
     {/if}

     <main class="mt-6">
         <section aria-label="{:__('列表')}">
             <div class="ui-card">
                 <div class="ui-card-header flex flex-wrap items-center justify-between gap-3">
                     <h2 class="text-base font-semibold text-gray-900">{:__('列表')}</h2>
                     <div class="flex flex-wrap gap-2">
                         <!-- S 排序 -->
                         {cms:pageorder id="order"}
                         <a href="{$order.url}" class="ui-pill text-sm {$order.active?'ui-pill-active':''}">{$order.title|htmlentities}</a>
                         {/cms:pageorder}
                         <!-- E 排序 -->
                     </div>
                 </div>
                 <div class="ui-card-body">
                     <div class="divide-y divide-gray-100">
                         <!-- S 列表 -->
                         {cms:pagelist id="item"}
                         <article class="py-4">
                             <div class="space-y-2">
                                 <h3 class="text-base font-semibold text-gray-900">
                                     {if $item.status!='normal'}<span class="mr-2 inline-flex items-center rounded-full bg-red-50 px-2 py-0.5 text-xs font-semibold text-red-700">{$item.status_text}</span>{/if}
                                     <a href="{$item.url}" class="no-underline hover:text-black">{:$item.title??($item.name??'无')}</a>
                                 </h3>

                                 <div class="oh-clamp-2 text-sm leading-7 text-gray-600">
                                     {$item.content|default=''}
                                 </div>

                                 {if isset($item['images']) || isset($item['image'])}
                                 {php}$imageList = array_filter(explode(',', $item['images']??$item['image']));{/php}
                                 {if $imageList}
                                 <div class="grid grid-cols-2 gap-2 pt-1 sm:grid-cols-4 md:grid-cols-6">
                                     {foreach name="imageList" id="image"}
                                     <a href="{$image}" target="_blank" class="group block aspect-[4/3] overflow-hidden rounded-md bg-gray-100">
                                         <img src="{$image}" alt="" loading="lazy" class="h-full w-full object-cover transition duration-300 group-hover:scale-105" onerror="this.onerror=null;this.src='/assets/addons/cms/img/default.png'">
                                     </a>
                                     {/foreach}
                                 </div>
                                 {/if}
                                 {/if}

                                 <div class="pt-1 text-xs text-gray-500">
                                     <span itemprop="date">{$item.createtime|human_date}</span>
                                 </div>
                             </div>
                         </article>
                         {/cms:pagelist}
                         <!-- E 列表 -->
                     </div>

                     <!-- S 分页 -->
                     <div class="mt-8">
                         {include file="common/pageinfo" loadmode="paging" /}
                     </div>
                     <!-- E 分页 -->
                 </div>
             </div>
         </section>
     </main>
 </div>
